var extend=function(){var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===e.call(t)},r=function(n){"use strict";if(!n||"[object Object]"!==e.call(n))return!1;var r=t.call(n,"constructor"),o=n.constructor&&n.constructor.prototype&&t.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!r&&!o)return!1;var i;for(i in n);return"undefined"==typeof i||t.call(n,i)};return function o(){"use strict";var t,e,i,s,a,c,u=arguments[0],p=1,f=arguments.length,l=!1;for("boolean"==typeof u?(l=u,u=arguments[1]||{},p=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});f>p;++p)if(t=arguments[p],null!=t)for(e in t)i=u[e],s=t[e],u!==s&&(l&&s&&(r(s)||(a=n(s)))?(a?(a=!1,c=i&&n(i)?i:[]):c=i&&r(i)?i:{},"Ref"!==s.constructor.name&&(u[e]=o(l,c,s))):"undefined"!=typeof s&&(u[e]=s));return u}}(),querySelector=function(){return function(){function t(t,n){var o=t[n];t[n]=function(t){var n,i=!1,s=!1;return t.match(r)?(t=t.replace(r,""),this.parentNode||(e.appendChild(this),s=!0),parentNode=this.parentNode,this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),i=!0),n=o.call(parentNode,"#"+this.id+" "+t),i&&(this.id=""),s&&e.removeChild(this),n):o.call(this,t)}}if(!HTMLElement.prototype.querySelectorAll)throw new Error("rootedQuerySelectorAll: This polyfill can only be used with browsers that support querySelectorAll");var e=document.createElement("div");try{e.querySelectorAll(":scope *")}catch(n){var r=/^\s*:scope/gi;t(HTMLElement.prototype,"querySelector"),t(HTMLElement.prototype,"querySelectorAll")}}(),function(t,e){var n;n=e?":scope ":"";var e=e||document;switch(typeof t){case"string":var r=/<([a-zA-Z0-9_]+) \/>/i,o=/\[([a-zA-Z0-9_\-]*)[ ]?=([ ]?[^\]]*)\]/i;if(t.indexOf("[")>-1&&o.exec(t)){t=t.replace(o,'[$1="$2"]')}if(null!==r.exec(t))return[document.createElement(result[1].toUpperCase())];if(0===t.length)return new Array;try{return e.querySelectorAll(n+t)}catch(i){console.log("Brahma: querySelectorAll not support query: "+t)}break;case"function":return[];case"object":if(t instanceof Array)return t;if(null===t)return[];if(t==window)return[t];if(t.jquery){for(var s=[],a=0;a<t.length;a++)s.push(t[a]);return s}if(t.brahma){for(var s=[],a=0;a<t.length;a++)s.push(t[a]);return s}return[t];case"undefined":default:return[t]}}}(),core=function(t,e){var n=function(){if(this===window){var t=new n,r=[],o=0;switch(arguments.length>0&&(t.selector=arguments[0]),typeof t.selector){case"function":selector.call(this,n);break;default:var r=e.call(this,t.selector)}if(("object"==typeof r||"function"==typeof r)&&r.length)for(o=0;o<r.length;o++)t[o]=r[o];return t.length=o,t.context=document,t}this.length=0,this.selector=null};return n.fn=n.prototype={constructor:n,version:"0.0.0",brahma:!0},n}(extend,querySelector),clone=function(){var t;return t=function(e){if(e instanceof Array){var n=[];n.length=e.length}else{if("object"!=typeof e)return e;var n={}}for(var r in e)e.hasOwnProperty(r)&&(null===e[r]||"object"!=typeof e[r]||"Ref"===e[r].constructor.name?n[r]=e[r]:n[r]=t(e[r]));return n}}(),mix=function(){return function(t,e){if("function"==typeof t&&"function"==typeof e){var n=function(){e.apply(this,arguments),t.apply(this,arguments)};("object"==typeof t.prototype||"object"==typeof e.prototype)&&(t.prototype&&(n.prototype=t.prototype,t.prototype=null),e.prototype&&("undefined"!=typeof n.prototype?n.prototype=inherit(n.prototype,e.prototype):n.prototype=e.prototype,e.prototype=null));for(var r in t)t.hasOwnProperty(r)&&"prototype"!==r&&(n[r]=t[r]);for(var r in e)t.hasOwnProperty(r)&&"prototype"!==r&&(n[r]=e[r]);return n}if("object"==typeof t&&"object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=clone(e[r]));return t}}}(),warns=function(){return{b_selector_uncom_format:"Incompatible format of query selector",not_valid_nodename:"Not valid node name",undefined_absclass:"Undefined class",undefined_factory:"Undefined factory"}}(),inherit=function(t,e,n){return function(t,r){if(t.__proto__){var o=Object.create(t.__proto__);for(var i in r)r.hasOwnProperty(i)&&("function"==typeof r[i]?o[i]=r[i]:t[i]=e(r[i]));return t.__proto__=o,t}var s={},a=function(){},c={},u={};for(var p in r)("undefined"==typeof s[p]||s[p]!=r[p])&&("function"==typeof r[p]?c[p]=r[p]:u[p]=e(r[p]));console.log("HELLO?");for(var p in t)"undefined"==typeof s[p]||s[p]!=t[p]?"function"==typeof t[p]?(console.log("mixin func ",p),c[p]=t[p]):u[p]=e(t[p]):console.log("unmixin ",console.log("mixin func ",p));a.prototype=c,a.prototype.constructor=t.constructor;var f=new a;return n(f,u)}}(extend,clone,mix),charge=function(t,e){var n=function(t){return function(){for(var n in t)t.hasOwnProperty(n)&&(this[n]=e(t[n]))}};return function(r,o,i){if("function"==typeof r){if(i)a=r;else{var s=[],a=function(){for(var t=0;t<s.length;t++)s[t].apply(this,arguments)},c={},u={};"object"==typeof r.prototype&&(c=r.prototype,r.prototype={});for(p in r)r.hasOwnProperty(p)&&(u[p]=r[p],delete r[p]);a.prototype=c}if("function"==typeof o.construct&&(i?o.construct.apply(a):s.push(new Object(o.construct))),"object"==typeof o.proto&&(i?extend(a,o.proto):t(a.prototype,o.proto)),"object"==typeof o.properties&&(i?extend(a,o.properties):s.push(n(o.properties))),!i){s.push(r);for(var p in u)u.hasOwnProperty(p)&&(a[p]=u[p])}return a}if("object"==typeof o.properties)for(p in o.properties)o.properties.hasOwnProperty(p)&&(r[p]=e(o.properties[p]));return"object"==typeof o.proto&&(r=t(r,o.proto)),"function"==typeof o.construct&&o.construct.apply(r),r}}(inherit,clone);!function(t,e,n,r){t.classes={},t.classes.create=function(t,e,r){if(this[t]=extend({construct:function(){},proto:{},properties:{}},e||{}),r instanceof Array)for(var o=0;o<r.length;++o)"function"==typeof this[r[o]].construct&&(this[t].construct=n(this[t].construct,this[r[o]].construct)),"object"==typeof this[r[o]].proto&&n(this[t].proto,this[r[o]].proto),"object"==typeof this[r[o]].properties&&n(this[t].properties,this[r[o]].properties)},t.charge=function(n,r,o){return e(n,t.classes[r],o||!1)},t.create=function(n,o){return n=n||{},o=o||[],o instanceof Array||(o=[o]),o.forEach(function(o){return"object"!=typeof t.classes[o]?t.warn(r.undefined_absclass+" "+o):void(n=e(n,t.classes[o]))}),n}}(core,charge,mix,warns),core.fn.extend=function(t){extend(this,t)},core.classes.events={properties:{__events:{eventListners:{}}},proto:{bind:function(t,e,n){return"object"!=typeof this.__events.eventListners[t]&&(this.__events.eventListners[t]=[]),this.__events.eventListners[t].push({callback:e,once:n}),this},on:function(){return this.bind.apply(this,arguments),this},once:function(t,e){return this.bind(t,e,!0),this},trigger:function(){if("integer"==typeof arguments[0])var t=(arguments[0],arguments[1]),e=arguments.length>2?arguments[2]:[];else var t=arguments[0],e=arguments.length>1?arguments[1]:[];var n=!1;if("object"==typeof this.__events.eventListners[t]&&this.__events.eventListners[t].length>0){for(var r=[],o=0;o<this.__events.eventListners[t].length;o++)"object"==typeof this.__events.eventListners[t][o]&&("function"==typeof this.__events.eventListners[t][o].callback&&(n=this.__events.eventListners[t][o].callback.apply(this,e)),this.__events.eventListners[t][o].once&&r.push(o));if(r.length>0)for(var o in r)this.__events.eventListners[t].splice(r[o],1)}return n}}};var support=function(t,e){return t.support=function(t){return Brahma.support[t]&&"function"==typeof Brahma.support[t]&&(Brahma.support[t]=Brahma.support[t]()),Brahma.support[t]?Brahma.support[t]:!1},t.support.extend=function(t){return e(this,t),this},t.support}(core,extend),getAbstractClass=function(){var t={object:{Null:function(t){return null===t?!0:!1},Array:function(t){return t instanceof Array?!0:!1},HTMLElement:function(t){return"[object HTML"===t.toString().substr(0,12)?!0:!1},Date:function(t){return t instanceof Date?!0:!1},absApplication:function(t){return t.hasOwnProperty("app__")?!0:!1},RichArray:function(t){return t instanceof Array||"integer"!=typeof t.index?!1:!0}},string:{Selector:function(t){return/^[>#\.]{0,2}[^'"]+[a-zA-Z0-9\[]+/.test(t)?!0:!1},JSON:function(t){return/^[\{]{1}[\s\S]*[\}]{1}$/gi.test(t)?!0:!1}}};return function(e){if(t[typeof e])for(var n in t[typeof e])if(t[typeof e].hasOwnProperty(n)&&t[typeof e][n](e))return n}}(),createChild=function(t){return function(e,n,r){var o=this===window?document.body:this;n=n||{};try{var i=document.createElement(e)}catch(s){return Brahma.warn(t.not_valid_nodename+" "+e),null}r?function(){null!==o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(o)}():o.appendChild(i);for(var a in n)n.hasOwnProperty(a)&&i.setAttribute(a,n[a]);return Brahma([i])}}(warns),toArray=function(){return function(t){return Array.prototype.slice.call(t)}}(),determineNodeObject=function(t,e,n,r){return function(o,i){var s=[],a=e(o);switch(a){case"HTMLELement":s=[o];break;case"Selector":case"String":s=n(o,i||{});break;case"Brahma":case"jQuery":case"Array":s=r(o);break;default:Brahma.warn(t.b_selector_uncom_format+" "+a)}return s}}(warns,getAbstractClass,createChild,toArray),utils=function(t,e){return t.utils={extend:function(t,n){return"undefined"!=typeof n?e(t,n):(e(this,t),this)}},t.utils}(core,extend),ref=function(){return function(t){function e(){}return e.prototype=t||this,e.prototype.constructor=e,new e}}();!function(){core.charge(core,"events",!0)}(core),core.document=core.create({ready:!1},["events"]),core.fn.extend({parent:function(){var t=[];return this.each(function(){t.indexOf(this.parentNode)<0&&t.push(this.parentNode)}),Brahma(t)}}),utils.extend({camelize:function(t){return t.replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}}),support.extend({dataset:function(){return"undefined"!=typeof document.createElement("div").dataset}}),function(t,e,n,r,o,i){t.classes.industry={properties:{__industry:{factories:{}}},proto:{factory:function(n,o,s,a){a=a||[],o=o||null,s=s||null;var c=this;a instanceof Array||(a=[a]),"object"!=typeof this.__industry.factories[n]&&(this.__industry.factories[n]={properties:{},proto:{},construct:function(){},make:function(){return c.make.call(c,n,arguments)}});var c=this;a.forEach(function(o){if("object"!=typeof t.classes[o])return t.warn(i.undefined_absclass+" "+o);var s=t.classes[o];"function"==typeof s.constructor&&(c.__industry.factories[n].construct=r(c.__industry.factories[n].construct,s.constructor)),"object"==typeof s.proto&&inherit(c.__industry.factories[n].proto,s.proto),"object"==typeof s.properties&&(c.__industry.factories[n].properties=e(c.__industry.factories[n].properties,s.properties))}),"function"==typeof o&&(this.__industry.factories[n].construct=r(c.__industry.factories[n].construct,o));for(var u in s)s.hasOwnProperty(u)&&("function"==typeof s[u]?this.__industry.factories[n].proto[u]=s[u]:this.__industry.factories[n].properties[u]=s[u]);return this.__industry.factories[n]},make:function(e,r){if("string"!=typeof e&&(extra=e,e="default"),"object"!=typeof options&&(options={}),"object"!=typeof this.__industry.factories[e])return t.warn(i.undefined_factory+" "+e);var s=this.__industry.factories[e],a=function(){for(prop in s.properties)s.properties.hasOwnProperty(prop)&&(this[prop]=n(s.properties[prop]),console.log("$module A",this.config))};a.prototype=s.proto;var c=new a;return s.construct.apply(c,r||[]),c.parent=o(this),c}}}}(core,extend,clone,mix,ref,warns),core.fn.extend({each:function(t){for(var e=0;e<this.length&&t.call(this[e],this[e],e)!==!1;e++);return this}}),core.warn=function(t){console.error("%c Brahma.warn","color:red;font-weight:bold;",t)};var addEvent=function(){return function(t,e,n,r){var o;o=function(i){r&&(t.addEventListener?t.removeEventListener(e,o,!1):t.attachEvent?element.detachEvent("on"+e,o):t["on"+e]=null),function(t){return"boolean"==typeof t&&t===!1}(n.apply(this,arguments))&&i.preventDefault()},null!=t&&"undefined"!=typeof t&&(t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o)}}(),removeEvent=function(){return function(t,e,n){t.addEventListener?t.removeEventListener(e,n||!1,!1):t.attachEvent?element.detachEvent("on"+e,n):t["on"+e]=null}}();core.fn.extend({find:function(t){var e,n=[];return this.each(function(){if(e=querySelector(t,this),e.length)for(var r=0;r<e.length;r++)n.push(e[r])}),Brahma(n)}}),core.fn.extend({html:function(t){return"undefined"==typeof t?this.length<=0?null:this[0].innerHTML:Brahma(this).each(function(){this.innerHTML=t})}}),core.fn.extend({empty:function(){return this.each(function(){this.innerHTML=""}),this}}),core.fn.extend({put:function(t,e){var n=determineNodeObject(t,e);return this.each(function(){for(i=0;i<n.length;++i)this.appendChild(n[i])}),Brahma(n)}}),core.fn.extend({and:function(t,e){var n=determineNodeObject(t,e);return this.each(function(){var t=this.parentNode;if(t.lastChild===this)for(i=0;i<n.length;++i)t.appendChild(n[i]);else for(i=0;i<n.length;++i)t.insertBefore(n[i],this.nextSibling)}),Brahma(n)}}),core.fn.extend({attr:function(){if(arguments.length>0){switch(typeof arguments[0]){case"object":this.each(function(){for(var t in arguments[0])this.setAttribute(t,arguments[0][t])});break;case"string":return arguments.length>1?(this.each(function(){this.setAttribute(arguments[0],arguments[1])}),this):this[0].getAttribute(arguments[0]);default:return this[0].attributes}return this}return this[0].attributes}}),core.fn.extend({addClass:function(){var t,e=arguments[0].split(" ");return this.each(function(){for(t=0;t<e.length;++t){var n=this.className.split(" ");n.indexOf(e[t])<0&&(n.push(e[t]),this.className=n.join(" "))}}),this},removeClass:function(){var t,e=arguments[0].split(" ");return this.each(function(){for(t=0;t<e.length;++t){var n=this.className.split(" "),r=n.indexOf(e[t]);r>-1&&(n.splice(r,1),this.className=n.join(" "))}}),this}}),core.fn.extend({wrapAll:function(t,e){var n=determineNodeObject(t,e),r=0;if(0===t.length)return null;for(r=0;r<n.length;r++)this.parent()[0].appendChild(n[r]);return this.each(function(){n[0].appendChild(this)}),Brahma(n)}}),core.fn.extend({data:function(){var t=arguments,e=Brahma.utils.camelize(t[0]),n=Brahma.support("dataset");return t.length>1?(this.each(function(){null===t[1]?n?delete this.dataset[e]:this.removeAttribute("data-"+t[0]):n?this.dataset[e]=t[1]:this.setAttribute("data-"+t[0],t[1])}),this):n?"undefined"!=typeof this[0].dataset[e]?this[0].dataset[e]:null:this[0].getAttribute("data-"+t[0])}}),core.fn.extend({css:function(){var t,e=[];return"object"==typeof arguments[0]?arguments[0]instanceof Array?(e=arguments[0],t=arguments[1]):t=arguments[0]:arguments.length>1?(t={},t[arguments[0]]=arguments[1]):t=arguments[0],"object"==typeof t?(this.each(function(){for(var n in t){if(0!==e.length)for(var r=0;r<e.length;r++)this.style[e[r]+n]=t[n];this.style[n]=t[n]}}),this):this[0].style[t]}}),function(t,e,n){t.fn.extend({bind:function(){var t=arguments,n=t[0].split(" ");return this.each(function(){if(""===n[r])return!0;for(var r=0;r<n.length;++r)e(this,n[r],t[1],t[2]||!1)})},on:function(){return this.bind.apply(this,arguments)},unbind:function(){var t=arguments,e=t[0].split(" ");return this.each(function(){for(var r=0;r<e.length;++r)n(this,e[r],t[1]||!1)})}})}(core,addEvent,removeEvent),function(){!function(t,e){var n=!1,r=!0,o=t.document,i=o.documentElement,s=o.addEventListener?"addEventListener":"attachEvent",a=o.addEventListener?"removeEventListener":"detachEvent",c=o.addEventListener?"":"on",u=function(r){("readystatechange"!=r.type||"complete"==o.readyState)&&(("load"==r.type?t:o)[a](c+r.type,u,!1),!n&&(n=!0)&&e.call(t,r.type||r))},p=function(){try{i.doScroll("left")}catch(t){return void setTimeout(p,50)}u("poll")};if("complete"==o.readyState)e.call(t,"lazy");else{if(o.createEventObject&&i.doScroll){try{r=!t.frameElement}catch(f){}r&&p()}o[s](c+"DOMContentLoaded",u,!1),o[s](c+"readystatechange",u,!1),t[s](c+"load",u,!1)}}(window,function(){core.document.ready=!0,core.trigger("DOMReady")}),core.fn.extend({ready:function(t){var e=this;(this[0]===window||this[0]===document)&&(core.document.ready?t.apply(this):core.bind("DOMReady",function(){t.apply(e)}))}})}(core),support.extend({mobile:function(){for(var t=!1,e=0,n=["iPad","iPhone","iPod"];e<n.length;e++)if(navigator.platform===n[e])return!0;return function(e,n){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}}),support.extend({translate3D:function(){for(var t=document.createElement("div"),e=!1,n=["perspectiveProperty","WebkitPerspective"],r=n.length-1;r>=0;r--)e=e?e:void 0!=t.style[n[r]];if(e){var o=document.createElement("style");o.textContent="@media (-webkit-transform-3d){#test3d{height:3px}}",document.getElementsByTagName("head")[0].appendChild(o),t.id="test3d",document.body.appendChild(t),e=3===t.offsetHeight,o.parentNode.removeChild(o),t.parentNode.removeChild(t)}return e}}),core.classes.tie={proto:{tie:function(t){return t.apply(this,arguments),this}}},core.classes.create("modules",{properties:{__modules:{modules:{}}},proto:{module:function(t){var t="module_"+t||"module_default",e="function"==typeof arguments[2]?arguments[2]:"function"==typeof arguments[1]?arguments[1]:!1,n="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:!1;return n||e?(this.factory(t,e,n||{},["events","modules"]),this):("undefined"==typeof this.__modules.modules[t]&&(this.__modules.modules[t]=this.make(t)),this.__modules.modules[t])}}},["industry"]),core.classes.extendable={proto:{extend:function(t){extend(this,t)}}},function(t,e,n){t.applications=t.create({__applications:t.create({designers:{}},["industry"])},["extendable"]),t.applications.__applications.factory("appdesigner",function(){this.factory=null,this.modules={}},{release:function(t,e){return this.factory.make(t,e)},extend:function(t){for(var e in t)t.hasOwnProperty(e)&&("function"==typeof t[e]?this.factory.proto[e]=t[e]:this.factory.properties[e]=n(t[e]));return this},module:function(t){var n="function"==typeof arguments[2]?arguments[2]:"function"==typeof arguments[1]?arguments[1]:!1,r="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:!1;return this.factory.construct=e(this.factory.construct,function(){this.module(t,n,r)}),this}},["tie"]),t.applications.extend({create:function(t,e,n){return("function"==typeof e||"object"==typeof n)&&(n=[e,e=n][0]),this.__applications.designers[t]=this.__applications.make("appdesigner"),this.__applications.designers[t].factory=this.__applications.factory(t,function(t,e){this.operands=t,this.config=extend(this.config||{},e),"function"==typeof n&&n.apply(this,arguments)},e||{},["tie","events","modules"]),this.__applications.designers[t]},edit:function(t,e){return this.__applications.designers[t].extend(e)},run:function(t,e,n){return this.__applications.designers[t].release(e,n)},exists:function(t){return"object"==typeof this.__applications.designers[t]}}),t.app=function(t){return this.applications.exists(t)?this.applications.edit.apply(this.applications,arguments):this.applications.create.apply(this.applications,arguments)},t.fn.app=function(e,n){return t.applications.run(e,this,n)}}(core,mix,clone),window.brahma=window.Brahma=core;